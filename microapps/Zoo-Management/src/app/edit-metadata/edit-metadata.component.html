<div *ngIf="this.loading" class="container">
  Loading...
  <mat-spinner color="access"></mat-spinner>
</div>
<div *ngIf="this.error && !this.loading" class="container">
  <h1>Metadaten konnte nicht geladen werden</h1>
</div>
<div class="container" *ngIf="!this.error && !this.loading">
  <div>
    <div *ngIf="this.metadataForm" class="tile">
     <div> <h2>Die Metadaten ändern</h2></div>

      <form [formGroup]="this.metadataForm" class="example-form" (ngSubmit)="onSubmit()">
        <div>
          <mat-form-field class="example-full-width">
            <mat-label>Name</mat-label>
            <input matInput type="text" formControlName="name" placeholder="Name">
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="example-full-width">
            <mat-label>description</mat-label>
            <textarea matInput type="text" formControlName="description" placeholder="Beschreibung" cdkTextareaAutosize ></textarea>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="example-full-width">
            <mat-label>Logo</mat-label>
            <textarea matInput type="text" formControlName="logo" placeholder="Logo" cdkTextareaAutosize>   </textarea>
          </mat-form-field>
        </div>
          <img [src]="this.logo" alt="Logo" width="160" height="100"> <button  mat-raised-button color="accent" (click)="refreshLogo()"><mat-icon>refresh</mat-icon></button>

    <div>
          <mat-form-field class="example-full-width">
            <mat-label>Address</mat-label>
            <textarea matInput type="text" formControlName="address" placeholder="Addresse" cdkTextareaAutosize>  </textarea>
          </mat-form-field>
        </div>


        <div *ngFor="let openingHour of getOpeningHoursControls(); let i = index">

          <mat-form-field class="example-full-width">
            <mat-label>Tag</mat-label>
            <input matInput type="text"  placeholder="Zeitraum" [value]="openingHour.get('openingWeekday')?.value">
          </mat-form-field>
          <mat-form-field class="example-full-width">
            <mat-label>Zeitraum</mat-label>
            <input matInput type="text"  placeholder="Zeitraum" [value]="openingHour.get('openingHours')?.value">
          </mat-form-field>
          <mat-form-field class="example-full-width">
            <mat-label>Info</mat-label>
            <input matInput type="text"  placeholder="Information" [value]="openingHour.get('openingInfo')?.value">
          </mat-form-field>
          <button mat-raised-button color="warn" (click)="deleteOpeningHours(i)" class="delete-button">Delete</button>
        </div>
        <button mat-raised-button color="accent" type="button" (click)="addOpeningHours()" class="delete-button">Add Opening Hours</button>

        <div *ngFor="let price of getPricesControls(); let i = index">
          <mat-form-field class="example-full-width">
            <mat-label>Kategorie</mat-label>
            <input matInput type="text"  placeholder="Kategorie" [value]="price.get('prices')?.value">
          </mat-form-field>
          <mat-form-field class="example-full-width">
            <mat-label>Preis</mat-label>
            <input matInput type="number" placeholder="Preis" [value]="price.get('prices')?.value">
          </mat-form-field>
          <button mat-raised-button color="warn" type="button" (click)="deletePrice(i)" class="delete-button">Delete</button>
        </div>
        <button mat-raised-button color="accent" type="button" (click)="addPrice()" class="delete-button">Add Price</button>
        <p>

        <button mat-raised-button color="accent" type="reset" class="delete-button">Reset</button>
        <button mat-raised-button color="primary" type="submit" [disabled]="!metadataForm.valid">Ändern</button>
        </p>
      </form>
    </div>
  </div>
</div>

